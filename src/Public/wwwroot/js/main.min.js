function periodToSeconds(t){const e=t.match(/PT?(?:(\d+)M)?(?:(\d+)S)/);return 60*(e[1]?parseInt(e[1]):0)+(e[2]?parseInt(e[2]):0)}function secondsToPeriod(t){return`PT${Math.floor(t/60)}M${t%60}S`}function setCookie(t,e,a){const n=encodeURIComponent(t),o=encodeURIComponent(e),s=new Date(a).toUTCString();document.cookie=`${n}=${o};expires=${s};path=/`}function Countdown(t){const e=this;this.startTime=new Date,this.duration=periodToSeconds(t.attr("datetime")),this.timerId=setInterval(()=>e.updateCountdown(),500),this.updateCountdown=function(){const a=(new Date-e.startTime)/1e3;var n=e.duration-a;n<=0&&(clearInterval(e.timerId),n=0),t.attr("datetime",secondsToPeriod(n)),t.text(function(t){const e=Math.floor(t/60),a=Math.floor(t%60);return`${e.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}(n))}}function SeatSelector(t,e){var a=!1;const n=[];var o=[];const s=t.find(".interactive-seat-selector"),i=t.find("form"),r=i.find(".form-select"),d=$("<div>").addClass("form-text text-danger d-hidden").insertBefore(i.find(".btn-primary")),c=t.data("max-seat-selections"),l=t.data("reservation-page-url"),u=s.data("scaled-for-parent-width"),f=parseFloat(s.css("font-size"));function m(t){t.status="available",t.$element.removeClass("selected").addClass("available"),o=o.filter(e=>e.number!==t.number),r.each((e,a)=>{const n=$(a);if(n.val()===t.number.toString())return n.val("").data("value",""),!1})}function p(t){t.status="selected",t.$element.removeClass("available").addClass("selected"),o.push(t),o.length>c&&m(o.shift()),r.each((e,a)=>{const n=$(a);if(""===n.val())return n.val(t.number).data("value",t.number),!1})}function h(){const t=n[$(this).data("number")-1];"selected"===t.status?m(t):"available"===t.status&&p(t)}function v(){const t=s.parent().width();if(t<u){const e=f*(t/u);s.css("font-size",e+"px")}}$(window).resize(v),v(),r.change(function(){const t=$(this),e=t.data("value"),a=t.val();a?(e&&m(n[e-1]),p(n[a-1]),r.each((t,e)=>{r.each((a,n)=>{if(t!==a){const t=$(n);$(e).val()===t.val()&&t.val("").data("value","")}})})):e&&m(n[e-1]);t.data("value",a)}),i.on("submit",function(t){if(!this.checkValidity())return;if(t.preventDefault(),a)return;a=!0,$.ajax({url:i.attr("action"),method:i.attr("method").toUpperCase(),data:i.serialize()}).done(t=>{const e=JSON.stringify(t);setCookie("seatLocks",e,e.lockExpiration),document.location=l}).fail(t=>{if(403===t.status)d.text(e[403][t.responseJSON.failureReason]),d.removeClass("d-hidden");else if(409===t.status){const a=t.responseJSON.seatNumber;d.text(e[403].replace("{}",a)),d.removeClass("d-hidden")}}).always(()=>a=!1)}),s.find(".seat").each((t,e)=>{const a=$(e),o=a.data("number");n[o-1]={$element:a,number:o,status:a.data("status")},a.click(h)}),$.each(n,(t,e)=>{const a="available"===e.status;r.each((t,n)=>{const o=$("<option>").data("status",e.status).prop("disabled",!a).prop("hidden",!a).text(e.number).val(e.number);$(n).append(o)})})}window.addEventListener("load",function(){$("time.countdown").each(function(){new Countdown($(this))})}),window.addEventListener("load",function(){const t=$(".lazy-loaded").map(function(t,e){return{$element:$(e),callback:$(e).data("onload"),priority:parseInt($(e).data("priority"))||5}}).get();t.sort((t,e)=>t.priority-e.priority),t.forEach(function(t){window[t.callback](t.$element)})});